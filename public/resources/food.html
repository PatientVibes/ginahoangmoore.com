<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Find food assistance resources in Kansas City metro area - food pantries, meal programs, SNAP help, and emergency food aid.">
    <title>Food Assistance Resources | KC Food Security Hub</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .loading {
            text-align: center;
            padding: var(--spacing-2xl);
        }
        .resource-list {
            display: grid;
            gap: var(--spacing-lg);
        }
        .resource-item {
            background: white;
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border-left: 4px solid var(--color-secondary);
        }
        .resource-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--spacing-md);
        }
        .resource-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--color-gray-900);
            margin-bottom: var(--spacing-xs);
        }
        .resource-category {
            display: inline-block;
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--color-secondary);
            color: white;
            border-radius: var(--border-radius);
            font-size: 0.875rem;
            font-weight: 600;
        }
        .resource-description {
            color: var(--color-text-light);
            margin-bottom: var(--spacing-md);
        }
        .resource-details {
            display: grid;
            gap: var(--spacing-sm);
        }
        .detail-row {
            display: flex;
            gap: var(--spacing-sm);
            align-items: start;
        }
        .detail-label {
            font-weight: 600;
            color: var(--color-gray-800);
            min-width: 80px;
        }
        .detail-value {
            color: var(--color-text-light);
        }
        .resource-actions {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
            flex-wrap: wrap;
        }
        .action-btn {
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--border-radius);
            font-weight: 600;
            text-decoration: none;
            transition: all var(--transition-fast);
        }
        .action-call {
            background: var(--color-primary);
            color: white;
        }
        .action-call:hover {
            background: var(--color-primary-dark);
            text-decoration: none;
        }
        .action-website {
            background: var(--color-gray-200);
            color: var(--color-gray-800);
        }
        .action-website:hover {
            background: var(--color-gray-300);
            text-decoration: none;
        }
        .verified-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--color-secondary);
            color: white;
            border-radius: var(--border-radius);
            font-size: 0.875rem;
            font-weight: 600;
        }
        .services-list {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-xs);
            margin-top: var(--spacing-sm);
        }
        .service-tag {
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--color-gray-100);
            border-radius: var(--border-radius);
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <!-- Crisis Alert Banner -->
    <div id="crisis-banner" class="crisis-banner" role="alert" aria-live="polite">
        <div class="container">
            <span class="crisis-icon">‚ö†Ô∏è</span>
            <strong>SNAP Benefit Alert:</strong> November 2025 benefits delayed due to federal shutdown.
            <a href="/crisis" class="crisis-link">Get immediate help ‚Üí</a>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <div class="nav-brand">
                    <h1><a href="/" style="color: inherit; text-decoration: none;">KC Food Security Hub</a></h1>
                </div>
                <ul class="nav-menu">
                    <li><a href="/#resources">Resources</a></li>
                    <li><a href="/data">Data</a></li>
                    <li><a href="/eligibility">Eligibility</a></li>
                    <li><a href="/get-involved">Get Involved</a></li>
                </ul>
                <button class="nav-toggle" aria-label="Toggle navigation">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </nav>
        </div>
    </header>

    <!-- Page Header -->
    <section class="hero" style="padding: var(--spacing-xl) 0;">
        <div class="container">
            <div style="max-width: 800px; margin: 0 auto; text-align: center;">
                <h2 class="hero-title" style="font-size: 2.5rem;">üçé Food Assistance Resources</h2>
                <p class="hero-subtitle">Food pantries, meal programs, SNAP assistance, and emergency food aid in the Kansas City metro area</p>
            </div>
        </div>
    </section>

    <!-- Resources Section -->
    <section style="padding: var(--spacing-2xl) 0;">
        <div class="container">
            <div id="loading" class="loading">
                <p>Loading resources...</p>
            </div>

            <div id="resources-container" class="resource-list" style="display: none;">
                <!-- Resources will be loaded here via JavaScript -->
            </div>

            <div id="error-container" style="display: none; text-align: center; padding: var(--spacing-2xl);">
                <p style="color: var(--color-danger); font-weight: 600;">Failed to load resources. Please try again later.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h4>About This Site</h4>
                    <p>A community resource providing verified, up-to-date information on food security and assistance programs in the Kansas City metro area.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/#resources">All Resources</a></li>
                        <li><a href="/data">Data Explorer</a></li>
                        <li><a href="/crisis">Crisis Info</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Emergency Contacts</h4>
                    <ul>
                        <li>üìû United Way 211: <a href="tel:211">Dial 211</a></li>
                        <li>üÜò Crisis Line: <a href="tel:988">Dial 988</a></li>
                        <li>üçé Harvesters: <a href="tel:8776539519">877-653-9519</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Stay Informed</h4>
                    <ul>
                        <li><a href="/about">About</a></li>
                        <li><a href="/privacy">Privacy</a></li>
                        <li><a href="https://github.com/PatientVibes/ginahoangmoore.com" target="_blank">GitHub</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 GinaHoangMoore.com | <span id="last-updated"></span></p>
                <p class="disclaimer">Information provided for educational purposes. Always verify with official agencies.</p>
            </div>
        </div>
    </footer>

    <script src="/js/main.js"></script>
    <script>
        // Load food assistance resources
        async function loadResources() {
            try {
                const response = await fetch('/api/resources?category=food');
                const { success, data } = await response.json();

                if (!success || !data) {
                    throw new Error('Failed to load resources');
                }

                document.getElementById('loading').style.display = 'none';
                document.getElementById('resources-container').style.display = 'grid';

                const container = document.getElementById('resources-container');
                container.innerHTML = data.map(resource => `
                    <div class="resource-item">
                        <div class="resource-header">
                            <div>
                                <h3 class="resource-title">${resource.name}</h3>
                                ${resource.verified ? '<span class="verified-badge">‚úì Verified</span>' : ''}
                            </div>
                            <span class="resource-category">${resource.category_icon || 'üçé'} ${resource.category_name}</span>
                        </div>

                        ${resource.description ? `<p class="resource-description">${resource.description}</p>` : ''}

                        <div class="resource-details">
                            ${resource.phone_formatted ? `
                                <div class="detail-row">
                                    <span class="detail-label">üìû Phone:</span>
                                    <span class="detail-value">${resource.phone_formatted}</span>
                                </div>
                            ` : ''}

                            ${resource.address ? `
                                <div class="detail-row">
                                    <span class="detail-label">üìç Address:</span>
                                    <span class="detail-value">${resource.address}${resource.city ? `, ${resource.city}` : ''}${resource.state ? `, ${resource.state}` : ''}${resource.zip ? ` ${resource.zip}` : ''}</span>
                                </div>
                            ` : resource.city ? `
                                <div class="detail-row">
                                    <span class="detail-label">üìç Location:</span>
                                    <span class="detail-value">${resource.city}${resource.state ? `, ${resource.state}` : ''}${resource.county ? ` (${resource.county} County)` : ''}</span>
                                </div>
                            ` : ''}

                            ${resource.hours_of_operation ? `
                                <div class="detail-row">
                                    <span class="detail-label">üïê Hours:</span>
                                    <span class="detail-value">${formatHours(resource.hours_of_operation)}</span>
                                </div>
                            ` : ''}

                            ${resource.eligibility_criteria ? `
                                <div class="detail-row">
                                    <span class="detail-label">‚úÖ Eligibility:</span>
                                    <span class="detail-value">${resource.eligibility_criteria}</span>
                                </div>
                            ` : ''}

                            ${resource.restrictions ? `
                                <div class="detail-row">
                                    <span class="detail-label">‚ö†Ô∏è Note:</span>
                                    <span class="detail-value">${resource.restrictions}</span>
                                </div>
                            ` : ''}
                        </div>

                        ${resource.services_provided ? `
                            <div class="services-list">
                                ${resource.services_provided.map(service => `
                                    <span class="service-tag">${service}</span>
                                `).join('')}
                            </div>
                        ` : ''}

                        <div class="resource-actions">
                            ${resource.phone ? `
                                <a href="tel:${resource.phone}" class="action-btn action-call">üìû Call Now</a>
                            ` : ''}
                            ${resource.website ? `
                                <a href="${resource.website}" target="_blank" rel="noopener" class="action-btn action-website">üåê Visit Website</a>
                            ` : ''}
                        </div>
                    </div>
                `).join('');

            } catch (error) {
                console.error('Error loading resources:', error);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error-container').style.display = 'block';
            }
        }

        function formatHours(hours) {
            if (typeof hours === 'string') {
                return hours;
            }
            if (hours.note) {
                return hours.note;
            }
            if (hours.phone_hours) {
                return hours.phone_hours;
            }
            // Format object hours
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            const formatted = days
                .filter(day => hours[day])
                .map(day => `${day.charAt(0).toUpperCase() + day.slice(1)}: ${hours[day]}`)
                .join(', ');
            return formatted || 'Contact for hours';
        }

        // Load resources on page load
        document.addEventListener('DOMContentLoaded', loadResources);
    </script>
</body>
</html>
