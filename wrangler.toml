# Cloudflare Workers & D1 Configuration
name = "ginahoangmoore"
compatibility_date = "2025-11-04"

# Pages configuration
pages_build_output_dir = "public"

# D1 Database bindings
[[d1_databases]]
binding = "DB" # Available in Workers as env.DB
database_name = "kc-food-security"
database_id = "542916a2-a743-4932-8d73-643d02bf5110"

# Environment variables (secrets set via Cloudflare dashboard)
# CENSUS_API_KEY = "your-census-api-key-here" (set via: wrangler pages secret put CENSUS_API_KEY)

# NOTE: Cron Triggers must be configured via Cloudflare Dashboard for Pages projects
# Go to: Workers & Pages > ginahoangmoore-com > Settings > Functions > Cron Triggers
# Add these schedules:
#   - Census sync: "0 9 * * 0" (Weekly Sundays 3 AM CT / 9 AM UTC)
#   - KC Library: "0 8 * * *" (Daily 2 AM CT / 8 AM UTC)

[env.production]
name = "ginahoangmoore-production"

[[env.production.d1_databases]]
binding = "DB"
database_name = "kc-food-security"
database_id = "542916a2-a743-4932-8d73-643d02bf5110"

[env.preview]
name = "ginahoangmoore-preview"

[[env.preview.d1_databases]]
binding = "DB"
database_name = "kc-food-security-preview"
database_id = "" # Will be filled after preview database creation

# Email configuration (Cloudflare Email Routing)
[[send_email]]
name = "SEND_EMAIL"
destination_address = "gina.pacis.moore@gmail.com"
